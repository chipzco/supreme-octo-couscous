<div class="container">
    <div [hidden]="submitted">
        <h1>Study Form</h1>
        <form (ngSubmit)="onSubmit()" #studyForm="ngForm">
            <div class="form-group">
                <label for="studyid">Study Protocol</label>
                <input type="text" class="form-control" id="studyid" required [(ngModel)]="study.protocol" name="protocol" #protocol="ngModel">
                <div [hidden]="protocol.valid || protocol.pristine" class="alert alert-danger">
                    protocol  is required
                </div>
            </div>
            <div class="form-group">
                <label for="CRO">CRO</label>
                <input type="text" class="form-control" id="CRO" required [(ngModel)]="study.cRO" name="cRO">
            </div>
            <div class="form-group">
                <label for="StartDate">Start Date</label>
                <input type="date" #startDate class="form-control" id="StartDate" (change)="study.startDate=startDate.value" name="startDate" [value]="study.startDate|date:'yyyy-MM-dd'">
            </div>
            <div class="form-group">
                <label for="DueDate">Due Date</label>
                <input type="date" #dueDate  class="form-control" id="DueDate" (change)="study.dueDate=dueDate.value" name="dueDate" [value]="study.dueDate|date:'yyyy-MM-dd'">   
            </div>
          
            <button type="submit" class="btn btn-primary" [disabled]="!studyForm.form.valid">Save</button>
        </form>
    </div>

    <hr />
    <app-fakeloader [startStop]="startStop" [loadTexts]="loadTexts"></app-fakeloader>
    <hr />
    <!-- <button class="btn-danger" (click)="checkLoader()">run loader</button> <button class="btn-danger" (click)="stopLoader()">stop loader</button> -->

    <div [hidden]="!submitted">
        <h2>You submitted the following:</h2>
        <div class="row">
            <div class="col-xs-3">protocol</div>
            <div class="col-xs-9 pull-left">{{ study.protocol }}</div>
        </div>
        <div class="row">
            <div class="col-xs-3">CRO</div>
            <div class="col-xs-9  pull-left">{{ study.cRO }}</div>
        </div>
        <div class="row">
            <div class="col-xs-3">Start Date</div>
            <div class="col-xs-9 pull-left">{{ study.startDate }}</div>
        </div>
        <div class="row">
            <div class="col-xs-3">Due Date</div>
            <div class="col-xs-9 pull-left">{{ study.dueDate }} </div>
        </div>       
        <br />
        <button class="btn btn-primary" [routerLink]="['/reports',{ outlets: { admin: 'studies'}}]">Return to study Listing</button>
        <button class="btn-danger" (click)="submitted=false">Edit this Study Again</button>        
    </div>
</div>